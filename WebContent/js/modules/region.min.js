window.Region=function(a){this.data={type:""};$.extend(this.data,a);this.regionRadio=$(".ui_radio_region"+this.data.type);this.special=$("div."+this.data.type+"_special");
this.table=this.special.find("table.country_list");this.areas=$('input[name="'+this.data.type+'areas"]');};window.Region.prototype={initUI:function(){var a=this;
a.table.find("tr.tb_title").unbind("click").click(function(){$(this).nextUntil("tr.tb_title").find("input").prop("checked",$(this).find("input").prop("checked"));
});a.table.find("tr.area_list span.sub_title").unbind("click").click(function(){$(this).nextAll("input").prop("checked",$(this).find("input").prop("checked"));
});a.regionRadio.click(function(){a.regionRadio.removeClass("ui_radio_checked");$(this).addClass("ui_radio_checked");if($(this).attr("data")==2){a.initAreas(a.special.prev(".comment").text(),true);
a.areas.val(a.special.prev(".comment").text());a.special.show(200).prev(".comment").show();}else{a.special.hide(200).prev(".comment").hide();a.areas.val("all");
a.special.prev(".comment").text("all");}});a.table.nextAll(".ui_radio_region_btn").click(function(){a.updateAreas($(this));a.special.hide(200);});},initAreas:function(a,c){var b=this;
b.regionRadio.removeClass("ui_radio_checked");b.special.hide().prev(".comment").hide();b.table.find("input").prop("checked",true);if(a!=undefined){b.areas.val(a);
if(a=="all"&&!c){b.regionRadio.eq(0).addClass("ui_radio_checked");b.special.hide();}else{if(a=="all"||a==""){b.regionRadio.eq(1).addClass("ui_radio_checked");
return;}else{$(".tb_title input,.sub_title input").prop("checked",false);b.special.prev(".comment").show();b.regionRadio.eq(1).addClass("ui_radio_checked").next(".comment").text(a).attr("title",a);
b.table.find("tr.area_list td>label").each(function(d,f){if(a.indexOf($(f).text())<0){$(f).next("input").prop("checked",false);}});}}}else{b.regionRadio.first().trigger("click");
}},updateAreas:function(c){var b=this;if(c.hasClass("ui_radio_region_cancel")&&(b.areas.val()==""||b.areas.val()=="all")){b.regionRadio.eq(0).trigger("click");
return;}else{var a=b.table.find("tr.area_list td>input").map(function(d,f){if($(f).prop("checked")){return $(f).prev("label").text();}}).get().join(",");
if(a.split(",").length==37||a.length==0){b.regionRadio.eq(0).trigger("click");return;}else{b.areas.val(a);b.special.prev(".comment").text(a);}}}};
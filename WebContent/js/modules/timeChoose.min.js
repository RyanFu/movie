jQuery(function(){$("body").delegate(".pnl_pro a.accBtn","click",function(){timeFunction.target=$(this).closest(".pnl_pro");timeFunction["select"+$(this).attr("selType")]();
});$("body").delegate(".pnl_pro .weekday input","click",function(){timeFunction.target=$(this).closest(".pnl_pro");timeFunction.selectAllRow($(this).attr("selIndex"),$(this));
});$("body").delegate(".pnl_pro .time_arrow span","click",function(){timeFunction.target=$(this).closest(".pnl_pro");timeFunction.selectAllCol($(this).index(),$(this));
});$("body").delegate(".pnl_pro .time_picker span","click",function(){timeFunction.target=$(this).closest(".pnl_pro");var a=timeFunction.getPos($(this));
(a[1]=="0px"||a[1]=="0%"||a[1]=="0")?timeFunction.item_unsel($(this)):timeFunction.item_sel($(this));});});var timeFunction={target:$(),getPos:function(a){if($.browser.msie){var b=[];
b.push(a.css("background-position-x"));b.push(a.css("background-position-y"));}else{var b=a.css("background-position").split(" ");}return b;},selectAllCol:function(a){var c="span.a"+a;
var b="span.t"+a;var d=this.getPos($(c));if(d[1]=="0px"||d[1]=="0%"||d[1]=="0"){this.item_unsel(c);this.item_unsel(b);}else{this.item_sel(c);this.item_sel(b);
}},selectAllRow:function(a,c){var b=".w"+a+" span";if(c.prop("checked")){this.item_sel(b);}else{this.item_unsel(b);}},selectAll:function(){this.item_sel(".time_picker span");
$(".weekday input[type='checkbox']",this.target).prop("checked",true);},selectWorkday:function(){this.item_sel(".w1 span, .w2 span, .w3 span, .w4 span, .w5 span");
$(".w1 input[type='checkbox'], .w2 input[type='checkbox'], .w3 input[type='checkbox'], .w4 input[type='checkbox'], .w5 input[type='checkbox']",this.target).prop("checked",true);
this.item_unsel(".w6 span, .w7 span");$(".w6 input[type='checkbox'], .w7 input[type='checkbox']",this.target).prop("checked",false);},selectWeekend:function(){this.item_unsel(".w1 span, .w2 span, .w3 span, .w4 span, .w5 span");
$(".w1 input[type='checkbox'], .w2 input[type='checkbox'], .w3 input[type='checkbox'], .w4 input[type='checkbox'], .w5 input[type='checkbox']",this.target).prop("checked",false);
this.item_sel(".w6 span, .w7 span");$(".w6 input[type='checkbox'], .w7 input[type='checkbox']",this.target).prop("checked",true);},item_sel:function(b){var a=this;
a.target.find(b).each(function(c,d){var f=a.getPos($(d));$(d).css("background-position",(f[0]+" 0px"));});},item_unsel:function(b){var a=this;a.target.find(b).each(function(c,d){var f=a.getPos($(d));
$(d).css("background-position",(f[0]+" 11px"));});}};(function(a){a.fn.timeslot=function(d){var c={value:(new Array(169)).join(1)};c=a.extend(true,{},c,d);
var b=this;return this.each(function(){var e="";e+='<span class="pnl_pro">';e+='<a class="accBtn" selType="All" >全部时间</a>&nbsp;&nbsp;&nbsp;&nbsp;';e+='<a class="accBtn" selType="Workday" >工作日</a>&nbsp;&nbsp;&nbsp;&nbsp;';
e+='<a class="accBtn" selType="Weekend" >周末</a>';e+='<span style="padding-left:200px; background:url(images/timer_picker_tip.jpg) no-repeat; margin-left:140px; "></span>';
e+=' <div class="show_time">';e+='<div class="weekday"></div>';e+='<div class="time_arrow">';e+='<span class="a0">1</span><span class="a1">1</span><span class="a2">2</span><span class="a3"></span><span class="a4"></span><span class="a5"></span>';
e+='<span class="a6"></span><span class="a7"></span><span class="a8"></span><span class="a9"></span><span class="a10""></span><span class="a11""></span>';
e+='<span class="a12"></span><span class="a13"></span><span class="a14"></span><span class="a15"></span><span class="a16"></span><span class="a17"></span>';
e+='<span class="a18"></span><span class="a19"></span><span class="a20"></span><span class="a21"></span><span class="a22"></span><span class="a23"></span>';
e+="</div>";e+="</div>";e+='<div class="show_time w1">';e+='<div class="weekday"><input type="checkbox" checked="true" selIndex="1"/>&nbsp;星期一</div>';e+='<div class="time_picker">';
e+='<span class="t0">0</span><span class="t1">1</span><span class="t2">2</span><span class="t3">3</span><span class="t4">4</span><span class="t5">5</span>';
e+='<span class="t6">6</span><span class="t7">7</span><span class="t8">8</span><span class="t9">9</span><span class="t10">10</span><span class="t11">11</span>';
e+='<span class="t12">12</span><span class="t13">13</span><span class="t14">14</span><span class="t15">15</span><span class="t16">16</span><span class="t17">17</span>';
e+='<span class="t18">18</span><span class="t19">19</span><span class="t20">20</span><span class="t21">21</span><span class="t22">22</span><span class="t23">23</span>';
e+="</div>";e+="</div>";e+='<div class="show_time w2">';e+='<div class="weekday"><input type="checkbox" checked="true" selIndex="2"/>&nbsp;星期二</div>';e+='<div class="time_picker">';
e+='<span class="t0">0</span><span class="t1">1</span><span class="t2">2</span><span class="t3">3</span><span class="t4">4</span><span class="t5">5</span>';
e+='<span class="t6">6</span><span class="t7">7</span><span class="t8">8</span><span class="t9">9</span><span class="t10">10</span><span class="t11">11</span>';
e+='<span class="t12">12</span><span class="t13">13</span><span class="t14">14</span><span class="t15">15</span><span class="t16">16</span><span class="t17">17</span>';
e+='<span class="t18">18</span><span class="t19">19</span><span class="t20">20</span><span class="t21">21</span><span class="t22">22</span><span class="t23">23</span>';
e+="</div>";e+="</div>";e+='<div class="show_time w3">';e+='<div class="weekday"><input type="checkbox" checked="true" selIndex="3"/>&nbsp;星期三</div>';e+='<div class="time_picker">';
e+='<span class="t0">0</span><span class="t1">1</span><span class="t2">2</span><span class="t3">3</span><span class="t4">4</span><span class="t5">5</span>';
e+='<span class="t6">6</span><span class="t7">7</span><span class="t8">8</span><span class="t9">9</span><span class="t10">10</span><span class="t11">11</span>';
e+='<span class="t12">12</span><span class="t13">13</span><span class="t14">14</span><span class="t15">15</span><span class="t16">16</span><span class="t17">17</span>';
e+='<span class="t18">18</span><span class="t19">19</span><span class="t20">20</span><span class="t21">21</span><span class="t22">22</span><span class="t23">23</span>';
e+="</div>";e+="</div>";e+='<div class="show_time w4">';e+='<div class="weekday"><input type="checkbox" checked="true" selIndex="4"/>&nbsp;星期四</div>';e+='<div class="time_picker">';
e+='<span class="t0">0</span><span class="t1">1</span><span class="t2">2</span><span class="t3">3</span><span class="t4">4</span><span class="t5">5</span>';
e+='<span class="t6">6</span><span class="t7">7</span><span class="t8">8</span><span class="t9">9</span><span class="t10">10</span><span class="t11">11</span>';
e+='<span class="t12">12</span><span class="t13">13</span><span class="t14">14</span><span class="t15">15</span><span class="t16">16</span><span class="t17">17</span>';
e+='<span class="t18">18</span><span class="t19">19</span><span class="t20">20</span><span class="t21">21</span><span class="t22">22</span><span class="t23">23</span>';
e+="</div>";e+="</div>";e+='<div class="show_time w5">';e+='<div class="weekday"><input type="checkbox" checked="true" selIndex="5"/>&nbsp;星期五</div>';e+='<div class="time_picker">';
e+='<span class="t0">0</span><span class="t1">1</span><span class="t2">2</span><span class="t3">3</span><span class="t4">4</span><span class="t5">5</span>';
e+='<span class="t6">6</span><span class="t7">7</span><span class="t8">8</span><span class="t9">9</span><span class="t10">10</span><span class="t11">11</span>';
e+='<span class="t12">12</span><span class="t13">13</span><span class="t14">14</span><span class="t15">15</span><span class="t16">16</span><span class="t17">17</span>';
e+='<span class="t18">18</span><span class="t19">19</span><span class="t20">20</span><span class="t21">21</span><span class="t22">22</span><span class="t23">23</span>';
e+="</div>";e+="</div>";e+='<div class="show_time w6">';e+='<div class="weekday"><input type="checkbox" checked="true" selIndex="6"/>&nbsp;星期六</div>';e+='<div class="time_picker">';
e+='<span class="t0">0</span><span class="t1">1</span><span class="t2">2</span><span class="t3">3</span><span class="t4">4</span><span class="t5">5</span>';
e+='<span class="t6">6</span><span class="t7">7</span><span class="t8">8</span><span class="t9">9</span><span class="t10">10</span><span class="t11">11</span>';
e+='<span class="t12">12</span><span class="t13">13</span><span class="t14">14</span><span class="t15">15</span><span class="t16">16</span><span class="t17">17</span>';
e+='<span class="t18">18</span><span class="t19">19</span><span class="t20">20</span><span class="t21">21</span><span class="t22">22</span><span class="t23">23</span>';
e+="</div>";e+="</div>";e+='<div class="show_time w7">';e+='<div class="weekday"><input type="checkbox" checked="true" selIndex="7"/>&nbsp;星期日</div>';e+=' <div class="time_picker" style="border-bottom:0;">';
e+='<span class="t0">0</span><span class="t1">1</span><span class="t2">2</span><span class="t3">3</span><span class="t4">4</span><span class="t5">5</span>';
e+='<span class="t6">6</span><span class="t7">7</span><span class="t8">8</span><span class="t9">9</span><span class="t10">10</span><span class="t11">11</span>';
e+='<span class="t12">12</span><span class="t13">13</span><span class="t14">14</span><span class="t15">15</span><span class="t16">16</span><span class="t17">17</span>';
e+='<span class="t18">18</span><span class="t19">19</span><span class="t20">20</span><span class="t21">21</span><span class="t22">22</span><span class="t23">23</span>';
e+="</div>";e+="</div>";e+='<div class="clear"></div>';e+='<input type="hidden" name="timeslots" class="timeslots_input" value=""/>';e+="</span>";a(this).append(e);
b.setTimeSlotValue(c.value);});};a.fn.setTimeSlotValue=function(b){return this.each(function(){var e;for(var c=0;c<b.length;c++){var d=a(this).find(".time_picker span").eq(c);
e=timeFunction.getPos(d);if(b.charAt(c)=="1"){d.css("background-position",e[0]+" 0px");}else{d.css("background-position",e[0]+" 11px");}}});};a.fn.getTimeSlotValue=function(b){var c=[];
this.each(function(){var d;d=a(this).find('input[name="timeslots"]').val(a(this).find(".time_picker span").map(function(f,g){var h=timeFunction.getPos(a(g));
if(h[1]=="0"||h[1]=="0px"||h[1]=="0%"){return"1";}else{return"0";}}).get().join(""));c.push(d);});return c;};a.fn.updateTime=function(){return this.each(function(){a(this).find('input[name="timeslots"]').val(a(this).find(".time_picker span").map(function(b,c){var d=timeFunction.getPos(a(c));
if(d[1]=="0"||d[1]=="0px"||d[1]=="0%"){return"1";}else{return"0";}}).get().join(""));});};})(jQuery);
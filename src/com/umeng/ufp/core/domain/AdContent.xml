<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.umeng.ufp.core.domain.AdContent">
  <resultMap id="AdContent-RESULT" type="com.umeng.ufp.core.domain.AdContent">
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column = "user_id" jdbcType="INTEGER" property="userId" />
    
    <result column="content_type" jdbcType="VARCHAR" property="contentType" />
    <result column="landing_type" jdbcType="VARCHAR" property="landingType" />
	<result column="display_type" jdbcType="VARCHAR" property="displayType" />
	<result column="landing_size" jdbcType="VARCHAR" property="landingSize" />
	
	<result column="url" jdbcType="VARCHAR" property="url" />
	<result column="icon" jdbcType="VARCHAR" property="icon" />
    <result column="img" jdbcType="VARCHAR" property="img" />
    
    <result column="title" jdbcType="VARCHAR" property="title" />
    <result column="text_font" jdbcType="VARCHAR" property="textFont" />
    <result column="text_size" jdbcType="VARCHAR" property="textSize" />
    <result column="text_color" jdbcType="VARCHAR" property="textColor" />
	<result column="ad_words" jdbcType="VARCHAR" property="adWords" />
	<result column="provider" jdbcType="VARCHAR" property="provider" />
	<result column="description" jdbcType="VARCHAR" property="description" />
	<result column="platform" jdbcType="VARCHAR" property="platform" />

	<result column="size" jdbcType="INTEGER" property="size" />
	<result column="app_package_name" jdbcType="VARCHAR" property="appPackageName" />
	<result column="app_version_code" jdbcType="VARCHAR" property="appVersionCode" />
	<result column="app_version_name" jdbcType="VARCHAR" property="appVersionName" />

	<result column="app_store_id" jdbcType="VARCHAR" property="appStoreId" />
	<result column="bundle_identifier" jdbcType="VARCHAR" property="bundleIdentifier" />

  </resultMap>
  
	<sql id="select">
		select *
		from
		ad_content
	</sql>

	<select id="AdContent.get" resultMap="AdContent-RESULT" parameterType="int">
		<include refid="select" />
		where id=#{id}
	</select>
	<select id="AdContent.getMapById" resultType="java.util.HashMap" parameterType="int">
		<include refid="select" />
		where id=#{id}
	</select>
  
	<select id="AdContent.find" resultMap="AdContent-RESULT" parameterType="java.util.Map">
        <include refid="select" />
        <where>
            <if test="id != null and id != ''">
                  id = #{id}
            </if>
        </where>
    </select>
	<select id="AdContent.listQuery" resultType="java.util.HashMap" parameterType="java.util.Map">
		<include refid="select" />
		order by id desc
	</select>  
	<select id="AdContent.listQueryPage" resultType="java.util.HashMap" parameterType="java.util.Map">
		select id, content_type, landing_type, landing_size, display_type, url,
			icon, img, title, text_font, text_size, text_color, ad_words, provider, description,
			price, platform
		from ad_content		
		<where>
			<if test="userId != null and userId != ''">
            	and user_id = #{userId}
            </if>
            <if test="platform != null and platform != ''">
            	and platform = #{platform}
            </if>
            <if test="landingSize != null and landingSize != ''">
            	and landing_size = #{landingSize}
            </if>
		</where>
		order by id desc
		<if test="limit != null">
		     limit
		     <if test="offset != null">
		         #{offset},
		     </if>
		     #{limit}
		</if>
	</select>   
	<select id="AdContent.listQueryPagecount" resultType="java.lang.Integer" parameterType="java.util.Map">
   		<![CDATA[
	        select count(id)
	        from ad_content
        ]]>
	</select>
  
	<insert id="AdContent.insert" parameterType="com.umeng.ufp.core.domain.AdContent">
	    insert into ad_content(user_id, created_time, updated_time, id, content_type, landing_type, display_type
		    ,landing_size, url, icon, img, title, platform, text_font, text_size, text_color, ad_words
		    ,provider, description
		    <if test="appPackageName != null and appPackageName != ''">,app_package_name</if>
		    <if test="appVersionName != null and appVersionName != ''">,app_version_name</if>
		    <if test="appVersionCode != null and appVersionCode != ''">,app_version_code</if>
	    ) values(#{userId}, SYSDATE() ,SYSDATE(), #{id} ,#{contentType} ,#{landingType} ,#{displayType}
	        ,#{landingSize}, #{url}, #{icon}, #{img}, #{title, #{platform}, #{textFont}
	        ,#{textSize}, #{textColor}, #{adWords}, #{provider}, #{description}
	        <if test="appPackageName != null and appPackageName != ''">,#{appPackageName}</if>
	        <if test="appVersionName != null and appVersionName != ''">,#{appVersionName}</if>
	        <if test="appVersionCode != null and appVersionCode != ''">,#{appVersionCode}</if>
	    )
		on duplicate key update updated_time = SYSDATE()
		    ,landing_size = #{landingSize}, content_type = #{contentType}, landing_type = #{landingType}
		    ,display_type = #{displayType}, url = #{url}, icon = #{icon}, img = #{img}
		    ,title = #{title}, text_font = #{textFont}, text_size = #{textSize}, text_color = #{textColor}
		    ,ad_words = #{adWords}, provider = #{provider}, description = #{description}
		    <if test="appPackageName != null and appPackageName != ''">,app_package_name = #{appPackageName}</if>
		    <if test="appVersionName != null and appVersionName != ''">,app_version_name = #{appVersionName}</if>
		    <if test="appVersionCode != null and appVersionCode != ''">,app_version_code = #{appVersionCode}</if>
	    
	</insert>

	<update id="AdContent.update" parameterType="com.umeng.ufp.core.domain.AdContent">
		insert into ad_content(user_id, created_time, updated_time, id, content_type, landing_type, display_type
		    ,landing_size, url, icon, img, title, platform, text_font
		    ,text_size, text_color, ad_words, provider, description
		    <if test="appPackageName != null and appPackageName != ''">,app_package_name</if>
		    <if test="appVersionName != null and appVersionName != ''">,app_version_name</if>
		    <if test="appVersionCode != null and appVersionCode != ''">,app_version_code</if>
	    ) values(#{userId}, SYSDATE() ,SYSDATE(), #{id} ,#{contentType} ,#{landingType} ,#{displayType}
	        ,#{landingSize}, #{url}, #{icon}, #{img}, #{title}, #{platform}, #{textFont}
	        ,#{textSize}, #{textColor}, #{adWords}, #{provider}, #{description}
	        <if test="appPackageName != null and appPackageName != ''">,#{appPackageName}</if>
	        <if test="appVersionName != null and appVersionName != ''">,#{appVersionName}</if>
	        <if test="appVersionCode != null and appVersionCode != ''">,#{appVersionCode}</if>
	    )
		on duplicate key update updated_time = SYSDATE()
		    ,landing_size = #{landingSize}, content_type = #{contentType}, landing_type = #{landingType}
		    ,display_type = #{displayType}, url = #{url}, icon = #{icon}, img = #{img}
		    ,title = #{title}, text_font = #{textFont}, text_size = #{textSize}, text_color = #{textColor}
		    ,ad_words = #{adWords}, provider = #{provider}, description = #{description}
		    <if test="appPackageName != null and appPackageName != ''">,app_package_name = #{appPackageName}</if>
		    <if test="appVersionName != null and appVersionName != ''">,app_version_name = #{appVersionName}</if>
		    <if test="appVersionCode != null and appVersionCode != ''">,app_version_code = #{appVersionCode}</if>
    </update>
    <select id="AdContent.findIds" resultType="java.lang.Integer" parameterType="java.lang.Integer">
        select id
        from ad_content
        <where>
        	status != 'delete'  
	      <if test="userId != null and userId != ''">
	          and user_id = #{userId}
	      </if>
       </where>     
    </select> 
</mapper>